Entity File Structure
=====================

struct String
{
    char8_t length;
    char[] data;
};

struct Vertex
{
    glm::vec3 position;
	glm::vec3 normal;
};

struct Triangle
{
    int vertices[3]; // index into vertex array in Mesh
};

struct Mesh
{
    uint32_t vertexCount;
	Vertex vertices[];
	uint32_t triangleCount;
	Triangle triangles[];
};

struct Transform
{
    glm::quat rotation;
    glm::vec3 scale;
    glm::vec3 translation;
};

struct Channel
{
    enum class PathType : uint8_t
    {
        Rotation = 0,
        Translation = 1,
        Scale = 2
    };
    PathType path;
    uint32_t startFrame;
    uint32_t endFrame;
    char data[]; // list of glm::vec3 for path=Scale/Translation or glm::quat for path=Rotation
};

struct Action
{
    String name;
    uint32_t channelCount;
    Channel channels[];
};

struct Node
{
    String name;
	enum Type : uint8_t
	{
		Empty = 0,
		Mesh = 1,
	};
    Type type;
    Transform transform;
    uint32_t childCount;
	uint32_t children[]; // index into node array in Entity
    uint32_t actionCount;
    Action actions[];
};

struct MeshNode : Node
{
    Mesh mesh;
};

struct Entity
{
    uint32_t nodeCount;
    Node nodes[];
    uint32_t animationCount;
    Animation animations[];
};
